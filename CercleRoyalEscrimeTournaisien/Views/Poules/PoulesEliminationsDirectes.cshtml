@model CercleRoyalEscrimeTournaisien.Models.PoulesViewModel

<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8" />
    <title>Tableau d'élimination directe</title>

    <style>

        body {
            background: #eef1f5;
            font-family: Arial, sans-serif;
        }

        .container {
            display: flex;
            width: 100%;
        }

        /* Colonne 1 = liste des matchs */
        .match-list {
            width: 50%;
            padding: 20px;
        }

        /* Colonne 2 = bracket */
        .bracket {
            width: 50%;
            padding: 20px;
        }

        /* Carte match */
        .match-card {
            background: white;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0,0,0,0.1);
        }

        /* Bracket match */
        .bracket-match {
            background: white;
            padding: 12px;
            margin: 15px 0;
            border-left: 4px solid #0078d7;
            border-radius: 6px;
        }

        /* Connecteur vertical */
        .connector {
            width: 3px;
            height: 40px;
            background: #0078d7;
            margin: auto;
        }

        .score-input {
            width: 70px;
            padding: 6px;
            font-size: 1.2em;
        }

        .btn {
            padding: 8px 15px;
            background: #0078ff;
            color: white;
            border: none;
            border-radius: 6px;
            margin-top: 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>

    <h1 style="text-align:center;margin-bottom:30px;">Tableau d'élimination directe</h1>

    <div class="container">

        <!-- ======================================== -->
        <!--        COLONNE GAUCHE : LISTE MATCHS     -->
        <!-- ======================================== -->
        <div class="match-list">

            @foreach (var m in Model.ScoresEliminitationsDirectesList)
            {
                <div class="match-card">

                    <h3>@m.PouleSelected — Round : @m.Round</h3>
                    <small>Date : @m.DateDeLaPoule</small><br><br>

                    <strong>Tireur 1 (Index @m.IndexTireur1)</strong><br>
                    Guid : @m.Tireur1Guid<br>
                    Score :
                    <input type="number" class="score-input" value="@m.ScoreDuTireur1" /><br><br>

                    <strong>Tireur 2 (Index @m.IndexTireur2)</strong><br>
                    Guid : @m.Tireur2Guid<br>
                    Score :
                    <input type="number" class="score-input" value="@m.ScoreDuTireur2" /><br><br>

                    <button class="btn">Enregistrer</button>

                </div>
            }

        </div>

        <!-- ======================================== -->
        <!--        COLONNE DROITE : BRACKET          -->
        <!-- ======================================== -->
        <div class="bracket">

            <h2>Bracket</h2>

            @{
                // Groupement par round (1/3, 1/2, finale)
                var grouped = Model.ScoresEliminitationsDirectesList
                    .GroupBy(x => x.Round)
                    .OrderBy(x => x.Key); // tri naturel des rounds
            }

            @foreach (var round in grouped)
            {
                <h3>@round.Key</h3>

                foreach (var match in round)
                {
                    <div class="bracket-match">
                        <strong>@match.IndexTireur1 vs @match.IndexTireur2</strong><br>
                        Score : @match.ScoreDuTireur1 - @match.ScoreDuTireur2
                    </div>

                    <div class="connector"></div>
                }

                <div class="bracket-match">
                    → Vainqueur du round @round.Key
                </div>
            }

        </div>

    </div>

</body>
</html>

